<html>
<header>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>AIO-IR system</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</header>
<body onload="on_load();">
    <style>
        *{
            margin: 0;
        }
        body{
          margin: 0;
        }
        

        .custom-btn {
          color: #fff;
          border-radius: 5px;
          /* padding: 10px 25px; */
          font-family: 'Lato', sans-serif;
          background: transparent;
          cursor: pointer;
          transition: all 0.3s ease;
          position: relative;
          display: inline-block;
          box-shadow:inset 2px 2px 2px 0px rgba(255,255,255,.5),
          7px 7px 20px 0px rgba(0,0,0,.1),
          4px 4px 5px 0px rgba(0,0,0,.1);
          outline: none;
          margin: auto;
          margin-top: 20px;
          display: flex;
          font-size: 20px;
        }

        .btn-13 {
          background-color: #F7B5CA;
          background-image: linear-gradient(315deg, #FDCEDF, 0%, #F8E8EE, 74%);
          border: none;
          z-index: 1;
        }
        .btn-13:after {
          position: absolute;
          content: "";
          width: 100%;
          height: 0;
          bottom: 0;
          left: 0;
          z-index: -1;
          border-radius: 5px;
          background-color: #FDCEDF;
        background-image: linear-gradient(315deg, #F8E8EE 0%, #FDCEDF 74%);
          box-shadow:
          -7px -7px 20px 0px #fff9,
          -4px -4px 5px 0px #fff9,
          7px 7px 20px 0px #0002,
          4px 4px 5px 0px #0001;
          transition: all 0.3s ease;
        }
        .btn-13:hover {
          color: #fff;
        }
        .btn-13:hover:after {
          top: 0;
          height: 100%;
        }
        .btn-13:active {
          top: 2px;
        }

        .container{
          width: 100%;
          height: 100%;
          display: block;
          background-color: #e0e5ec;;
        }
        /* search */
        
        .group_btn{
          height: 100%;
          padding-top: 20px;
        }
        .group_btn button{
          width: 130px;
          height: 50px;
          border-radius: 10px;
          margin-right: 3%;
          color: white;
          font-size: 20px;
        }
        /* search */
    
       .img_path{
        height: 100%;
        background-color: #bdc0c5;
        padding-left: 20px;
       }
       .img_path label{
        font-size: 18px;
      }
      .img_path input{
        height: 40px;
        width: 429px;
        border-radius: 10px;
        border: none;
        margin: 5px 10px 0 10px;
        padding-left: 2%;
        font-size: 13px;
      }
      .img_path button{
        width: 80px;
        height: 40px;
        color: white;
        border-radius: 10px;
        font-size: 15px;
      }

      .csv{
        width: 98%;
        height: 100%;
        padding-left: 69px;
        background-color: bdc0c5;
       }
       .csv label{
        font-size: 18px;
       }
       .csv select{
        width: 80px;
        height: 40px;
        border-radius: 10px;
        border: none;
        margin: 5px 3px 0 10px;
        padding-left: 5px;
        font-size: 13px;
       }

       .num_querry{
        background-color: bdc0c5;
        padding-left: 49px;
       }
       .num_querry label{
        font-size: 18px;
       }
       .num_querry input{
        width: 45px;
        height: 40px;
        border-radius: 10px;
        border: none;
        margin:5px 5px 0 5px;
        padding-left: 4%;
        font-size: 13px;
       }
       .num_querry button{
        width: 80px;
        height: 40px;
        color: white;
        border-radius: 10px;
        font-size: 15px;
       }
       
      
        /* selection */
    
        /* list img */
        .image{
          width: 100%;
          height: 100%;
        }
        /* list img */
    
        /* add image button */
        #div_img {
                display: flex;
                flex-direction: row;    
                flex-wrap: wrap;
                background-color: #e0e5ec;
                height: 100vh;
                width: 75vw;
                overflow-x: hidden;
                overflow-y: scroll;
            }
    
            .container_img_btn {
                position: relative;
                width: 100%;
                max-width: 208px;
                max-height: 120px;
                display: grid;
                grid-template-columns: auto auto auto auto;
                padding: 1%;
                cursor: pointer;
            }
            
            .container_img_btn img {
                width: 100%;
                height: 100%;
            }
    
            .container_img_btn .btn_knn {
                /* display: none; */
                position: absolute;
                top: 50%;
                left: 10%;
                background-color: #FDCEDF;
                color: white;
                font-size: 16px;
                padding: 5px 12px;
                cursor: pointer;
                border-radius: 5px;
                text-align: center;
            }
            .container_img_btn .btn_select {
                display: none;
                position: absolute;
                top: 50%;
                right: 10%;
                background-color: #FDCEDF;
                color: white;
                font-size: 16px;
                padding: 5px 12px;
                cursor: pointer;
                border-radius: 5px;
                text-align: center;
            }
            
            #OD, #Place {
              margin-right: auto;
            }
            .container_img_btn .btn_knn:hover{
              background-color: #F8E8EE;
            }

            .container_img_btn .btn_select:hover{
              background-color: #F8E8EE;
            }
    
            .container_img_btn img:hover{
                border: 4px solid #FDCEDF;
            }
            /* .container_img_btn img:focus{hoverImg
                border: 1px solid blue;
            } */
            /* poup */
            .hoverImg {
              font-size: 1px;
            }

            .button_group textarea {
                padding: 10px;
                height: 100px;
                box-sizing: border-box;
            }

            #popup_canvas{
                width: 100%;
                height: 100%;
            }
    
            #popup_fname_div{
                position: fixed;
                margin-left: 25%;
                margin-top: 60%;
                color: #F8E8EE;
                font-size: 30;
            }

            .left-side {
              min-width:40vh; 
              padding: 20px;
              overflow-y: scroll;
            }
              
            .button_group textarea  {
              border: none;
              border-radius: 12px;
            }

            .checkbox_options {
              width: 18px;
              height: 18px;
            }

           
            .search, .searchod {
              width: 200px;
              margin: 30px;
            }
            

            .search input, .searchod input{
              width: 200px;
              height: 40px;
              border: none;
              border-radius: 10px;
              display: flex;
              font-size: 14px;
              padding-left: 10px;
            }

            .place-list, .od-list {
              display: block;
              background-color: #fff;
              margin-top: 5px;
              border: none;
              border-radius: 10px;
              height: 200px;
              padding: 0;
              overflow: hidden;
              overflow-y: scroll;
            }

            .placeItem, .odItem {
              cursor: pointer;
              border: none;
              width: 200px;
              height: 25px;
              font-size: 14px;
            }

            .odItem:hover ,.placeItem:hover {
              background-color: #FDCEDF;
            }

            #videoModal {
                position: absolute;
                width: 100%;
                height: 70vh;
                left: 50vh;
                top: 15vh;
                max-width: 800px;
                background-color: #fff;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                border-radius: 8px;
                overflow: hidden;
                display: none;
                justify-content: center;
                justify-items: center;
                align-items: center;
            }
            #closeBtn {
                position: absolute;
                top: 10px;
                right: 10px;
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
            }
            video {
                width: 80%;
                height: auto;
                display: block;
                margin: auto;
                border-radius: 10px;
            }


            #frame_id {
              text-align: center;
              font-size: 25px;
              display: block;
            }

            #wrapvideo {
              display: block;
              line-height: 6rem;
              margin-top: -20px;
            }

            .hidden-label {
<<<<<<< HEAD
              color: #F2BED1;
              background: #F9F5F6;
=======
              color: #FF0000;
>>>>>>> df44f3092f3f27073a45f7a26ab14b397280dcc3
              margin-top: 20px;
              display: block;
              text-align: center;
              display: none;
            }

            .tag {
                display: inline-block;
                padding: 5px 10px;
                margin: 5px;
                background-color: rgba(255,255,255,0.8);
                border-radius: 3px;
            }
            .delete-btn {
                margin-left: 10px;
                cursor: pointer;
                color: gray;
            }

            .odplace_container {
              border-top: 1px solid gray;
              width: 100%;
              justify-content: center;
              padding-top: 20px;
              margin: 20px 0 20px 0;
              display: flex;
              gap: 10px;
            }

            .odplace_box {
              display: flex;
              width: fit-content;
              gap: 10px;
            }
            
            @supports (display: flex) {
              @media screen and (min-width: 1024px) {
                article {
                display: flex;
              }
              .container {
                display: flex;
              }
            }
          }

          @supports (display: grid) {
            @media screen and (min-width: 1024px) {
              article {
                display: grid;
              }
            }
          }
    
      </style>
    <div class="container">

        <!-- <div style="height: 5px; width: 100%; background-color: black; margin-bottom: 5px; margin-top: 5px;"></div> -->
        <div class="left-side">
          
          <form class="button_group" style="
                  display: grid; grid-template-columns: repeat(3, 0fr); gap: 10px;
              ">
              <input class= "checkbox_options" type="checkbox" id="OCR_checkbox">  
              <label for="OCR">OCR:</label>
              <div>
                <textarea type="text" id="OCR" placeholder="Enter OCR text:" maxlength="200" oninput="updateCharCount()"></textarea>
                <div class="char-counter" id="charCounter">0/200</div>
              </div>
              <input class= "checkbox_options" type="checkbox" id="ASR_checkbox">  
              <label for="ASR">ASR:</label>
              <div>
                <textarea type="text" id="ASR" placeholder="Enter ASR text:" maxlength="200" oninput="updateCharCountASR()"></textarea>
                <div class="char-counter" id="charCounterASR">0/200</div>  
              </div>
              <input class= "checkbox_options" type="checkbox" id="clip">
              <label for="clip" class="Cliplabel">CLIP</label>     
              <textarea type="text" id="text_query" placeholder="Enter CLIP text:"></textarea>
          </form>
          <div class="odplace_container">
            <div class="odplace_box">
              <input class= "checkbox_options" type="checkbox" id="OD">
              <label for="OD" class="Odlabel">OD</label>        
              <input class= "checkbox_options" type="checkbox" id="Place">
              <label for="Place" class="Placelabel">PLACE</label>
            </div>
          </div>     
          <div class="search">
            <input id="place_query" type="text" placeholder="Place query">
            <div class="search-result">
              <ul class="place-list">
              </ul>
            </div>
          </div>

          <div class="searchod">
            <input id="od_query" type="text" placeholder="OD query">
            <div class="search-result-od">
              <ul class="od-list">
              </ul>
            </div>
            <div id="tag-container">
              <!-- Tags will be added here -->
            </div>
          </div>
          <button class="custom-btn btn-13" onclick="search();">Search</button>
          <label id="delayedLabel" class="hidden-label">Please tick the options above</label>
        </div>

        <div>
          <div id="div_img">
            
          </div>
    
          <div style="height: 5px; width: 100%; background-color: black;"></div>
          <div id="div_page">
              
          </div>
          <div id="div_total_page">Total: 1200 page</div>
          <div style="margin-bottom: 50px;"></div>  
        </div>
          
        <div id="videoModal">
            <button id="closeBtn">&times;</button>
            <div id="wrapvideo">
              <label id="frame_id"></label>
              <video id="videoPlayer" controls>
            </div>
            </video>
        </div>
      </div>
    </div>
    <script>
        var data = '{{ data|tojson }}';
        data = data.replace(/\s/g, '');
        data = data.replace(/\\/g, '/');
        data = JSON.parse(data);
        let btn_knn = document.getElementsByClassName("btn_knn");
        let btn_select = document.getElementsByClassName("btn_select");
        let hoverImg = document.getElementsByClassName("hoverImg");
        const checkbox = document.getElementById('Place');
        const checkboxOD = document.getElementById('OD');
        const checkboxOCR = document.getElementById('OCR_checkbox');
        const checkboxASR = document.getElementById('ASR_checkbox');
        const searchplace = document.querySelector('.search');
        const searchod = document.querySelector('.searchod');
        const placeList = document.querySelector('.place-list');
        const searchInput = document.getElementById('place_query');
        const ODList = document.querySelector('.od-list');
        const searchInputOD = document.getElementById('od_query');
        const checkboxClip = document.getElementById('clip');
        const ODlabel = document.querySelector('.Odlabel');
        const Placelabel = document.querySelector('.Placelabel');
        const videoFrame = document.getElementById('videoModal');
        const frameId = document.getElementById('frame_id');
        const delayedlabel = document.getElementById('delayedLabel');
        const OCRquery = document.getElementById('OCR');
        const ASRquery = document.getElementById('ASR');

        let tags = []
        
        searchod.style.display = searchplace.style.display = 'none'; 

        document.addEventListener('DOMContentLoaded', function() {
            var closeBtn = document.getElementById('closeBtn');
            var videoPlayer = document.getElementById('videoPlayer');

            closeBtn.addEventListener('click', function() {
                videoPlayer.pause();
                videoPlayer.currentTime = 0;
            });
        });
        
        document.getElementById('closeBtn').addEventListener('click', function() {
            document.getElementById('videoModal').style.display = 'none';
        });

        
        
        checkboxOCR.addEventListener('change', () => {
          if (checkboxOCR.checked) {
            checkboxASR.checked = false;
            checkboxASR.disabled = true;
            checkboxClip.disabled = true;
            checkboxClip.checked = false;
            hideOD();
            hidePlace();
          } else {
            checkboxClip.disabled = false;
            checkboxASR.disabled = false;
          }
        });
        
        checkboxASR.addEventListener('change', () => {
          if (checkboxASR.checked) {
            checkboxOCR.checked = false;
            checkboxOCR.disabled = true;
            checkboxClip.disabled = true;
            checkboxClip.checked = false;
            hideOD();
            hidePlace();
          } else {
            checkboxOCR.disabled = false;
            checkboxClip.disabled = false;
          }
        });
        
        checkbox.addEventListener('change', () => {
          if (checkbox.checked) {
            searchplace.style.display = 'block';
            searchod.style.display = 'none';
            checkboxOD.checked = false;
          } else {
            searchplace.style.display = 'none';
          }
        });
        
        checkboxOD.addEventListener('change', () => {
          if (checkboxOD.checked) {
            searchod.style.display = 'block';
            searchplace.style.display = 'none';
            checkbox.checked = false;
          } else {
            searchod.style.display = 'none';
          }
        });

        
        
        searchInput.addEventListener('input', () => {
          searchPlace(removeToneMark(searchInput.value.toLowerCase()));
        });
        
        searchInputOD.addEventListener('input', () => {
          searchOD(removeToneMark(searchInputOD.value.toLowerCase()), 0);
        });

        function updateCharCount() {
            const textarea = document.getElementById('OCR');
            const charCounter = document.getElementById('charCounter');
            charCounter.textContent = `${textarea.value.length}/200`;
        }

        
        function updateCharCountASR() {
            const textarea = document.getElementById('ASR');
            const charCounterASR = document.getElementById('charCounterASR');
            charCounterASR.textContent = `${textarea.value.length}/200`;
        }

        function add_paging(){
            var url = new URL(window.location.href);
            var cur_index = parseInt(url.searchParams.get("index"));
            var imgpath = url.searchParams.get("imgpath");
            // var labelpath = url.searchParams.get("labelpath");
            if (cur_index == 'undefined'){
                cur_index = 0;
            }
            var i = cur_index-4;
            if (i > 0){
                var iDiv = document.createElement('div');
                iDiv.className = 'page_num';
                iDiv.innerHTML = "...";
                document.getElementById("div_page").appendChild(iDiv);
            }
            for (i; ((i < data['num_page']) && (i < cur_index+4)); i++){
                if (i < 0){
                    i = 0;
                }
                var iDiv = document.createElement('div');
                iDiv.className = 'page_num';
                var iA = document.createElement('a');
                // iA.href = "?index="+i.toString()+"&imgpath="+imgpath+"&labelpath="+labelpath;
                iA.href = "?index="+i.toString()+"&imgpath="+imgpath;
                iA.innerHTML = i.toString();
                if (i == cur_index){
                    iA.style.color="green";
                }
                iDiv.appendChild(iA);
                document.getElementById("div_page").appendChild(iDiv);
            }
            if (i < data['num_page']){
                var iDiv = document.createElement('div');
                iDiv.className = 'page_num';
                iDiv.innerHTML = "...";
                document.getElementById("div_page").appendChild(iDiv);
            }
            document.getElementById("div_total_page").innerHTML = "Total: "+data['num_page'].toString()+" page";
        }
        
        function add_img(div_id_image){
            let div_img = document.getElementById("div_img");
            let pagefile_list = data['pagefile'];
            
            pagefile_list.forEach((item,index) => {
                // console.log('item: ' + JSON.stringify(item))
                $("#div_img").append(
                    `<div class= "container_img_btn">
                        <button class="btn_knn" onClick="go_img_search(${item.id})">IR</button>
                        <img class="hoverImg" onclick="show_video(${item.id}, '${item.imgpath}')" src="get_img?fpath=${item.imgpath}">
                    </div>`
                )
            });
        
        }
        
        function go_img_search(id){
            window.open("/imgsearch?imgid="+id);
        }

        function on_load(){
            var url = new URL(window.location.href);
            var imgpath = url.searchParams.get("imgpath");

            if("query" in data){
              document.getElementById("text_query").value = data["query"]
            }
            add_paging();
            add_img("div_img");
        }

        window.addEventListener('load', loadFormState);

        function show_video(id, path){
            videoFrame.style.display ="flex";
            videourl = `/static/video/scene_${id}.mp4`;
            videoPlayer.innerHTML = `<source src="${videourl}" type="video/mp4">`;
            videoPlayer.load()
            frameId.innerHTML = path;
        }

        function search(){
          if (checkboxClip.checked) {
            text_query = document.getElementById('text_query').value;
            window.location.href = "/textsearch?textquery="+text_query;
          } else if (checkbox.checked) {
            place_query = searchInput.value;
            window.location.href = "/placesearch?placequery="+place_query;
          } else if (checkboxOD.checked) {
            object_query = tags.map(item => `objectquery=${encodeURIComponent(item)}`).join('&');
            window.location.href = "/objectsearch?"+object_query;
          } else if (checkboxOCR.checked) {
            text_query = document.getElementById('OCR').value;
            window.location.href = "/ocrsearch?query="+text_query;
          } else if (checkboxASR.checked) {
            text_query = document.getElementById('ASR').value;
            window.location.href = "/asrsearch?query="+text_query;
          } else {
            delayedlabel.style.display = 'block';
            setTimeout(function() {
              delayedlabel.style.display = 'none';
            }, 3000); 
          }
        }


        function searchPlace(a) {
          
          placeList.innerHTML = ``;
          places = ['airfield', 'airplane_cabin', 'airport_terminal', 'alcove', 'alley', 'amphitheater', 'amusement_arcade', 'amusement_park', 'apartment_building/outdoor', 'aquarium', 'aqueduct', 'arcade', 'arch', 'archaelogical_excavation', 'archive', 'arena/hockey', 'arena/performance', 'arena/rodeo', 'army_base', 'art_gallery', 'art_school', 'art_studio', 'artists_loft', 'assembly_line', 'athletic_field/outdoor', 'atrium/public', 'attic', 'auditorium', 'auto_factory', 'auto_showroom', 'badlands', 'bakery/shop', 'balcony/exterior', 'balcony/interior', 'ball_pit', 'ballroom', 'bamboo_forest', 'bank_vault', 'banquet_hall', 'bar', 'barn', 'barndoor', 'baseball_field', 'basement', 'basketball_court/indoor', 'bathroom', 'bazaar/indoor', 'bazaar/outdoor', 'beach', 'beach_house', 'beauty_salon', 'bedchamber', 'bedroom', 'beer_garden', 'beer_hall', 'berth', 'biology_laboratory', 'boardwalk', 'boat_deck', 'boathouse', 'bookstore', 'booth/indoor', 'botanical_garden', 'bow_window/indoor', 'bowling_alley', 'boxing_ring', 'bridge', 'building_facade', 'bullring', 'burial_chamber', 'bus_interior', 'bus_station/indoor', 'butchers_shop', 'butte', 'cabin/outdoor', 'cafeteria', 'campsite', 'campus', 'canal/natural', 'canal/urban', 'candy_store', 'canyon', 'car_interior', 'carrousel', 'castle', 'catacomb', 'cemetery', 'chalet', 'chemistry_lab', 'childs_room', 'church/indoor', 'church/outdoor', 'classroom', 'clean_room', 'cliff', 'closet', 'clothing_store', 'coast', 'cockpit', 'coffee_shop', 'computer_room', 'conference_center', 'conference_room', 'construction_site', 'corn_field', 'corral', 'corridor', 'cottage', 'courthouse', 'courtyard', 'creek', 'crevasse', 'crosswalk', 'dam', 'delicatessen', 'department_store', 'desert/sand', 'desert/vegetation', 'desert_road', 'diner/outdoor', 'dining_hall', 'dining_room', 'discotheque', 'doorway/outdoor', 'dorm_room', 'downtown', 'dressing_room', 'driveway', 'drugstore', 'elevator/door', 'elevator_lobby', 'elevator_shaft', 'embassy', 'engine_room', 'entrance_hall', 'escalator/indoor', 'excavation', 'fabric_store', 'farm', 'fastfood_restaurant', 'field/cultivated', 'field/wild', 'field_road', 'fire_escape', 'fire_station', 'fishpond', 'flea_market/indoor', 'florist_shop/indoor', 'food_court', 'football_field', 'forest/broadleaf', 'forest_path', 'forest_road', 'formal_garden', 'fountain', 'galley', 'garage/indoor', 'garage/outdoor', 'gas_station', 'gazebo/exterior', 'general_store/indoor', 'general_store/outdoor', 'gift_shop', 'glacier', 'golf_course', 'greenhouse/indoor', 'greenhouse/outdoor', 'grotto', 'gymnasium/indoor', 'hangar/indoor', 'hangar/outdoor', 'harbor', 'hardware_store', 'hayfield', 'heliport', 'highway', 'home_office', 'home_theater', 'hospital', 'hospital_room', 'hot_spring', 'hotel/outdoor', 'hotel_room', 'house', 'hunting_lodge/outdoor', 'ice_cream_parlor', 'ice_floe', 'ice_shelf', 'ice_skating_rink/indoor', 'ice_skating_rink/outdoor', 'iceberg', 'igloo', 'industrial_area', 'inn/outdoor', 'islet', 'jacuzzi/indoor', 'jail_cell', 'japanese_garden', 'jewelry_shop', 'junkyard', 'kasbah', 'kennel/outdoor', 'kindergarden_classroom', 'kitchen', 'lagoon', 'lake/natural', 'landfill', 'landing_deck', 'laundromat', 'lawn', 'lecture_room', 'legislative_chamber', 'library/indoor', 'library/outdoor', 'lighthouse', 'living_room', 'loading_dock', 'lobby', 'lock_chamber', 'locker_room', 'mansion', 'manufactured_home', 'market/indoor', 'market/outdoor', 'marsh', 'martial_arts_gym', 'mausoleum', 'medina', 'mezzanine', 'moat/water', 'mosque/outdoor', 'motel', 'mountain', 'mountain_path', 'mountain_snowy', 'movie_theater/indoor', 'museum/indoor', 'museum/outdoor', 'music_studio', 'natural_history_museum', 'nursery', 'nursing_home', 'oast_house', 'ocean', 'office', 'office_building', 'office_cubicles', 'oilrig', 'operating_room', 'orchard', 'orchestra_pit', 'pagoda', 'palace', 'pantry', 'park', 'parking_garage/indoor', 'parking_garage/outdoor', 'parking_lot', 'pasture', 'patio', 'pavilion', 'pet_shop', 'pharmacy', 'phone_booth', 'physics_laboratory', 'picnic_area', 'pier', 'pizzeria', 'playground', 'playroom', 'plaza', 'pond', 'porch', 'promenade', 'pub/indoor', 'racecourse', 'raceway', 'raft', 'railroad_track', 'rainforest', 'reception', 'recreation_room', 'repair_shop', 'residential_neighborhood', 'restaurant', 'restaurant_kitchen', 'restaurant_patio', 'rice_paddy', 'river', 'rock_arch', 'roof_garden', 'rope_bridge', 'ruin', 'runway', 'sandbox', 'sauna', 'schoolhouse', 'science_museum', 'server_room', 'shed', 'shoe_shop', 'shopfront', 'shopping_mall/indoor', 'shower', 'ski_resort', 'ski_slope', 'sky', 'skyscraper', 'slum', 'snowfield', 'soccer_field', 'stable', 'stadium/baseball', 'stadium/football', 'stadium/soccer', 'stage/indoor', 'stage/outdoor', 'staircase', 'storage_room', 'street', 'subway_station/platform', 'supermarket', 'sushi_bar', 'swamp', 'swimming_hole', 'swimming_pool/indoor', 'swimming_pool/outdoor', 'synagogue/outdoor', 'television_room', 'television_studio', 'temple/asia', 'throne_room', 'ticket_booth', 'topiary_garden', 'tower', 'toyshop', 'train_interior', 'train_station/platform', 'tree_farm', 'tree_house', 'trench', 'tundra', 'underwater/ocean_deep', 'utility_room', 'valley', 'vegetable_garden', 'veterinarians_office', 'viaduct', 'village', 'vineyard', 'volcano', 'volleyball_court/outdoor', 'waiting_room', 'water_park', 'water_tower', 'waterfall', 'watering_hole', 'wave', 'wet_bar', 'wheat_field', 'wind_farm', 'windmill', 'yard', 'youth_hostel', 'zen_garden']
          for (place of places) {
              if (removeToneMark(place).includes(a)) {
                  item = document.createElement("li");
                  item.classList.add('placeItem');
                  item.innerHTML =  `
                  <button class="placeItem" onclick="searchInput.value = '${place}'; this.blur();">
                  ${place}
                  `;
                  placeList.appendChild(item);
              }
          }
        }

        function searchOD(a) {
          ods = [
    "Accordion", "Adhesive tape", "Aircraft", "Airplane", "Alarm clock", "Alpaca", "Ambulance", "Animal", "Ant", "Antelope",
    "Apple", "Armadillo", "Artichoke", "Auto part", "Axe", "Backpack", "Bagel", "Baked goods", "Balance beam", "Ball",
    "Balloon", "Banana", "Band-aid", "Banjo", "Barge", "Barrel", "Baseball bat", "Baseball glove", "Bat (Animal)", 
    "Bathroom accessory", "Bathroom cabinet", "Bathtub", "Beaker", "Bear", "Bed", "Bee", "Beehive", "Beer", "Beetle",
    "Bell pepper", "Belt", "Bench", "Bicycle", "Bicycle helmet", "Bicycle wheel", "Bidet", "Billboard", "Billiard table",
    "Binoculars", "Bird", "Blender", "Blue jay", "Boat", "Bomb", "Book", "Bookcase", "Boot", "Bottle", "Bottle opener",
    "Bow and arrow", "Bowl", "Bowling equipment", "Box", "Boy", "Brassiere", "Bread", "Briefcase", "Broccoli", 
    "Bronze sculpture", "Brown bear", "Building", "Bull", "Burrito", "Bus", "Bust", "Butterfly", "Cabbage", "Cabinetry",
    "Cake", "Cake stand", "Calculator", "Camel", "Camera", "Can opener", "Canary", "Candle", "Candy", "Cannon", "Canoe",
    "Cantaloupe", "Car", "Carnivore", "Carrot", "Cart", "Cassette deck", "Castle", "Cat", "Cat furniture", "Caterpillar",
    "Cattle", "Ceiling fan", "Cello", "Centipede", "Chainsaw", "Chair", "Cheese", "Cheetah", "Chest of drawers", 
    "Chicken", "Chime", "Chisel", "Chopsticks", "Christmas tree", "Clock", "Closet", "Clothing", "Coat", "Cocktail",
    "Cocktail shaker", "Coconut", "Coffee", "Coffee cup", "Coffee table", "Coffeemaker", "Coin", "Common fig", 
    "Common sunflower", "Computer keyboard", "Computer monitor", "Computer mouse", "Container", "Convenience store",
    "Cookie", "Cooking spray", "Corded phone", "Cosmetics", "Couch", "Countertop", "Cowboy hat", "Crab", "Cream", 
    "Cricket ball", "Crocodile", "Croissant", "Crown", "Crutch", "Cucumber", "Cupboard", "Curtain", "Cutting board",
    "Dagger", "Dairy Product", "Deer", "Desk", "Dessert", "Diaper", "Dice", "Digital clock", "Dinosaur", "Dishwasher",
    "Dog", "Dog bed", "Doll", "Dolphin", "Door", "Door handle", "Doughnut", "Dragonfly", "Drawer", "Dress", "Drill (Tool)",
    "Drink", "Drinking straw", "Drum", "Duck", "Dumbbell", "Eagle", "Earrings", "Egg (Food)", "Elephant", "Envelope",
    "Eraser", "Face powder", "Facial tissue holder", "Falcon", "Fashion accessory", "Fast food", "Fax", "Fedora", 
    "Filing cabinet", "Fire hydrant", "Fireplace", "Fish", "Flag", "Flashlight", "Flower", "Flowerpot", "Flute",
    "Flying disc", "Food", "Food processor", "Football", "Football helmet", "Footwear", "Fork", "Fountain", "Fox",
    "French fries", "French horn", "Frog", "Fruit", "Frying pan", "Furniture", "Garden Asparagus", "Gas stove",
    "Giraffe", "Girl", "Glasses", "Glove", "Goat", "Goggles", "Goldfish", "Golf ball", "Golf cart", "Gondola", "Goose",
    "Grape", "Grapefruit", "Grinder", "Guacamole", "Guitar", "Hair dryer", "Hair spray", "Hamburger", "Hammer", 
    "Hamster", "Hand dryer", "Handbag", "Handgun", "Harbor seal", "Harmonica", "Harp", "Harpsichord", "Hat", "Headphones",
    "Heater", "Hedgehog", "Helicopter", "Helmet", "High heels", "Hiking equipment", "Hippopotamus", "Home appliance",
    "Honeycomb", "Horizontal bar", "Horse", "Hot dog", "House", "Houseplant", "Human arm", "Human beard", "Human body",
    "Human ear", "Human eye", "Human face", "Human foot", "Human hair", "Human hand", "Human head", "Human leg",
    "Human mouth", "Human nose", "Humidifier", "Ice cream", "Indoor rower", "Infant bed", "Insect", "Invertebrate", 
    "Ipod", "Isopod", "Jacket", "Jacuzzi", "Jaguar (Animal)", "Jeans", "Jellyfish", "Jet ski", "Jug", "Juice",
    "Kangaroo", "Kettle", "Kitchen & dining room table", "Kitchen appliance", "Kitchen knife", "Kitchen utensil",
    "Kitchenware", "Kite", "Knife", "Koala", "Ladder", "Ladle", "Ladybug", "Lamp", "Land vehicle", "Lantern", "Laptop",
    "Lavender (Plant)", "Lemon", "Leopard", "Light bulb", "Light switch", "Lighthouse", "Lily", "Limousine", "Lion",
    "Lipstick", "Lizard", "Lobster", "Loveseat", "Luggage and bags", "Lynx", "Magpie", "Mammal", "Man", "Mango",
    "Maple", "Maracas", "Marine invertebrates", "Marine mammal", "Measuring cup", "Mechanical fan", "Medical equipment",
    "Microphone", "Microwave oven", "Milk", "Miniskirt", "Mirror", "Missile", "Mixer", "Mixing bowl", "Mobile phone",
    "Monkey", "Moths and butterflies", "Motorcycle", "Mouse", "Muffin", "Mug", "Mule", "Mushroom", "Musical instrument",
    "Musical keyboard", "Nail (Construction)", "Necklace", "Nightstand", "Oboe", "Office building", "Office supplies",
    "Orange", "Organ (Musical Instrument)", "Ostrich", "Otter", "Oven", "Owl", "Oyster", "Paddle", "Palm tree",
    "Pancake", "Panda", "Paper cutter", "Paper towel", "Parachute", "Parking meter", "Parrot", "Pasta", "Pastry",
    "Peach", "Pear", "Pen", "Pencil case", "Pencil sharpener", "Penguin", "Perfume", "Person", "Personal care",
    "Personal flotation device", "Piano", "Picnic basket", "Picture frame", "Pig", "Pillow", "Pineapple", "Pitcher (Container)",
    "Pizza", "Pizza cutter", "Plant", "Plastic bag", "Plate", "Platter", "Plumbing fixture", "Polar bear", "Pomegranate",
    "Popcorn", "Porch", "Porcupine", "Poster", "Potato", "Power plugs and sockets", "Pressure cooker", "Pretzel", 
    "Printer", "Pumpkin", "Punching bag", "Rabbit", "Raccoon", "Racket", "Radish", "Ratchet (Device)", "Raven",
    "Rays and skates", "Red panda", "Refrigerator", "Remote control", "Reptile", "Rhinoceros", "Rifle", "Ring binder",
    "Rocket", "Roller skates", "Rose", "Rugby ball", "Ruler", "Salad", "Salt and pepper shakers", "Sandal", "Sandwich",
    "Saucer", "Saxophone", "Scale", "Scarf", "Scissors", "Scoreboard", "Scorpion", "Screwdriver", "Sculpture", "Sea lion",
    "Sea turtle", "Seafood", "Seahorse", "Seat belt", "Segway", "Serving tray", "Sewing machine", "Shark", "Sheep",
    "Shelf", "Shellfish", "Shirt", "Shorts", "Shotgun", "Shower", "Shrimp", "Sink", "Skateboard", "Ski", "Skirt",
    "Skull", "Skunk", "Skyscraper", "Slow cooker", "Snack", "Snail", "Snake", "Snowboard", "Snowman", "Snowmobile",
    "Snowplow", "Soap dispenser", "Sock", "Sofa bed", "Sombrero", "Sparrow", "Spatula", "Spice rack", "Spider", "Spoon",
    "Sports equipment", "Sports uniform", "Squash (Plant)", "Squid", "Squirrel", "Stairs", "Stapler", "Starfish",
    "Stationary bicycle", "Stethoscope", "Stool", "Stop sign", "Strawberry", "Street light", "Stretcher", "Studio couch",
    "Submarine", "Submarine sandwich", "Suit", "Suitcase", "Sun hat", "Sunglasses", "Surfboard", "Sushi", "Swan",
    "Swim cap", "Swimming pool", "Swimwear", "Sword", "Syringe", "Table", "Table tennis racket", "Tablet computer",
    "Tableware", "Taco", "Tank", "Tap", "Tart", "Taxi", "Tea", "Teapot", "Teddy bear", "Telephone", "Television",
    "Tennis ball", "Tennis racket", "Tent", "Tiara", "Tick", "Tie", "Tiger", "Tin can", "Tire", "Toaster", "Toilet",
    "Toilet paper", "Tomato", "Tool", "Toothbrush", "Torch", "Tortoise", "Towel", "Tower", "Toy", "Traffic light",
    "Traffic sign", "Train", "Training bench", "Treadmill", "Tree", "Tree house", "Tripod", "Trombone", "Trousers",
    "Truck", "Trumpet", "Turkey", "Turtle", "Umbrella", "Unicycle", "Van", "Vase", "Vegetable", "Vehicle",
    "Vehicle registration plate", "Violin", "Volleyball (Ball)", "Waffle", "Waffle iron", "Wall clock", "Wardrobe",
    "Washing machine", "Waste container", "Watch", "Watercraft", "Watermelon", "Weapon", "Whale", "Wheel",
    "Wheelchair", "Whisk", "Whiteboard", "Willow", "Window", "Window blind", "Wine", "Wine glass", "Wine rack",
    "Winter melon", "Wok", "Woman", "Wood-burning stove", "Woodpecker", "Worm", "Wrench", "Zebra", "Zucchini"
]

          ODList.innerHTML = ``;
          for (od of ods) {
              if (removeToneMark(od).includes(a)) {
                  item = document.createElement("li");
                  item.classList.add('odItem');
                  item.innerHTML = `
                  <button class="odItem" onclick="addTag('${od}');">
                  ${od}
                  `;
                  ODList.appendChild(item);
                }
            }
        }

        function addTag(tagName) {
          if (!tags.includes(tagName)) {
            tags.push(tagName);
            const tagContainer = document.getElementById('tag-container');
            const tag = document.createElement('div');
            tag.className = 'tag';
            tag.innerHTML = `${tagName} <span class="delete-btn" onclick="deleteTag(this, '${tagName}');">&times;</span>`;
            tagContainer.appendChild(tag);
          }
        }

       
        function deleteTag(element, tagName) {
            element.parentNode.remove();
            tags = tags.filter(tag => tag !== tagName);
        }

       
        function removeToneMark(str) {
            // remove accents
            var from = "àáãảạăằắẳẵặâầấẩẫậèéẻẽẹêềếểễệđùúủũụưừứửữựòóỏõọôồốổỗộơờớởỡợìíỉĩịäëïîöüûñçýỳỹỵỷ",
                to   = "aaaaaaaaaaaaaaaaaeeeeeeeeeeeduuuuuuuuuuuoooooooooooooooooiiiiiaeiiouuncyyyyy";
            for (var i=0, l=from.length ; i < l ; i++) {
              str = str.replace(RegExp(from[i], "gi"), to[i]);
            }

            str = str.toLowerCase().trim()

            return str;
        }

        
    </script>
</body>
</html> 
