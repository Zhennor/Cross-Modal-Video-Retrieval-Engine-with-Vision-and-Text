<html>
<header>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>AIO-IR system</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</header>
<body onload="on_load();">
    <style>
        *{
            margin: 0;
        }
        body{
          margin: 0;
        }
        

        .custom-btn {
          color: #fff;
          border-radius: 5px;
          /* padding: 10px 25px; */
          font-family: 'Lato', sans-serif;
          background: transparent;
          cursor: pointer;
          transition: all 0.3s ease;
          position: relative;
          display: inline-block;
          box-shadow:inset 2px 2px 2px 0px rgba(255,255,255,.5),
          7px 7px 20px 0px rgba(0,0,0,.1),
          4px 4px 5px 0px rgba(0,0,0,.1);
          outline: none;
          margin: auto;
          margin-top: 20px;
          display: flex;
          font-size: 20px;
        }

        .btn-13 {
          background-color: #89d8d3;
          background-image: linear-gradient(315deg, #89d8d3 0%, #03c8a8 74%);
          border: none;
          z-index: 1;
        }
        .btn-13:after {
          position: absolute;
          content: "";
          width: 100%;
          height: 0;
          bottom: 0;
          left: 0;
          z-index: -1;
          border-radius: 5px;
          background-color: #4dccc6;
        background-image: linear-gradient(315deg, #4dccc6 0%, #96e4df 74%);
          box-shadow:
          -7px -7px 20px 0px #fff9,
          -4px -4px 5px 0px #fff9,
          7px 7px 20px 0px #0002,
          4px 4px 5px 0px #0001;
          transition: all 0.3s ease;
        }
        .btn-13:hover {
          color: #fff;
        }
        .btn-13:hover:after {
          top: 0;
          height: 100%;
        }
        .btn-13:active {
          top: 2px;
        }

        .container{
          width: 100%;
          height: 100%;
          display: block;
          background-color: #e0e5ec;;
        }
        /* search */
        
        .group_btn{
          height: 100%;
          padding-top: 20px;
        }
        .group_btn button{
          width: 130px;
          height: 50px;
          border-radius: 10px;
          margin-right: 3%;
          color: white;
          font-size: 20px;
        }
        /* search */
    
       .img_path{
        height: 100%;
        background-color: #bdc0c5;
        padding-left: 20px;
       }
       .img_path label{
        font-size: 18px;
      }
      .img_path input{
        height: 40px;
        width: 429px;
        border-radius: 10px;
        border: none;
        margin: 5px 10px 0 10px;
        padding-left: 2%;
        font-size: 13px;
      }
      .img_path button{
        width: 80px;
        height: 40px;
        color: white;
        border-radius: 10px;
        font-size: 15px;
      }

      .csv{
        width: 98%;
        height: 100%;
        padding-left: 69px;
        background-color: bdc0c5;
       }
       .csv label{
        font-size: 18px;
       }
       .csv select{
        width: 80px;
        height: 40px;
        border-radius: 10px;
        border: none;
        margin: 5px 3px 0 10px;
        padding-left: 5px;
        font-size: 13px;
       }

       .num_querry{
        background-color: bdc0c5;
        padding-left: 49px;
       }
       .num_querry label{
        font-size: 18px;
       }
       .num_querry input{
        width: 45px;
        height: 40px;
        border-radius: 10px;
        border: none;
        margin:5px 5px 0 5px;
        padding-left: 4%;
        font-size: 13px;
       }
       .num_querry button{
        width: 80px;
        height: 40px;
        color: white;
        border-radius: 10px;
        font-size: 15px;
       }
       
      
        /* selection */
    
        /* list img */
        .image{
          width: 100%;
          height: 100%;
        }
        /* list img */
    
        /* add image button */
        #div_img {
                display: flex;
                flex-direction: row;    
                flex-wrap: wrap;
                background-color: #e0e5ec;
                height: 100vh;
                width: 100vw;
                overflow-y: scroll;
            }
    
            .container_img_btn {
                position: relative;
                width: 100%;
                max-width: 208px;
                max-height: 120px;
                display: grid;
                grid-template-columns: auto auto auto auto;
                padding: 1%;
                cursor: pointer;
            }
            
            .container_img_btn img {
                width: 100%;
                height: 100%;
            }
    
            .container_img_btn .btn_knn {
                /* display: none; */
                position: absolute;
                top: 50%;
                left: 10%;
                background-color: #4dccc6;
                color: white;
                font-size: 16px;
                padding: 5px 12px;
                cursor: pointer;
                border-radius: 5px;
                text-align: center;
            }
            .container_img_btn .btn_select {
                display: none;
                position: absolute;
                top: 50%;
                right: 10%;
                background-color: #4dccc6;
                color: white;
                font-size: 16px;
                padding: 5px 12px;
                cursor: pointer;
                border-radius: 5px;
                text-align: center;
            }
            
            #OD, #Place {
              margin-right: auto;
            }
            .container_img_btn .btn_knn:hover{
              background-color: #145552;
            }

            .container_img_btn .btn_select:hover{
              background-color: #145552;
            }
    
            .container_img_btn img:hover{
                border: 4px solid #4dccc6;
            }
            /* .container_img_btn img:focus{hoverImg
                border: 1px solid blue;
            } */
            /* poup */
            .hoverImg {
              font-size: 1px;
            }

            .button_group textarea {
                padding: 10px;
                height: 100px;
                box-sizing: border-box;
            }

            #popup_canvas{
                width: 100%;
                height: 100%;
            }
    
            #popup_fname_div{
                position: fixed;
                margin-left: 25%;
                margin-top: 60%;
                color: rgb(0,255,0);
                font-size: 30;
            }

            .left-side {
              min-width:40vh; 
              padding: 20px;
              overflow-y: scroll;
            }
              
            .button_group textarea  {
              border: none;
              border-radius: 12px;
            }

            .checkbox_options {
              width: 18px;
              height: 18px;
            }

           
            .search, .searchod{
              width: 200px;
              margin: 30px;
              display: none;
            }
            

            .search input, .searchod input{
              width: 200px;
              height: 40px;
              border: none;
              border-radius: 10px;
              display: flex;
              font-size: 14px;
              padding-left: 10px;
            }

            .search_result {
              width: 150px; 
              height: 100px;
              background-color: #fff;
            }

            .place-list, .od-list {
              display: block;
              background-color: #fff;
              margin-top: 5px;
              border: none;
              border-radius: 10px;
              height: 200px;
              padding: 0;
              overflow: hidden;
              overflow-y: scroll;
            }

            .placeItem, .odItem {
              cursor: pointer;
              border: none;
              width: 200px;
              height: 25px;
              font-size: 14px;
            }

            .odItem:hover ,.placeItem:hover {
              background-color: #89d8d3;
            }

            #videoModal {
                position: absolute;
                width: 100%;
                height: 70vh;
                left: 50vh;
                top: 15vh;
                max-width: 800px;
                background-color: #fff;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                border-radius: 8px;
                overflow: hidden;
                display: none;
                justify-content: center;
                justify-items: center;
                align-items: center;
            }
            #closeBtn {
                position: absolute;
                top: 10px;
                right: 10px;
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
            }
            video {
                width: 80%;
                height: auto;
                display: block;
                margin: auto;
                border-radius: 10px;
            }


            #frame_id {
              text-align: center;
              font-size: 25px;
              display: block;
            }

            #wrapvideo {
              display: block;
              line-height: 6rem;
              margin-top: -20px;
            }

            .hidden-label {
              color: red;
              margin-top: 20px;
              display: block;
              text-align: center;
              display: none;
            }

            @supports (display: flex) {
              @media screen and (min-width: 1024px) {
                article {
                display: flex;
              }
              .container {
                display: flex;
              }
            }
          }

          @supports (display: grid) {
            @media screen and (min-width: 1024px) {
              article {
                display: grid;
              }
            }
          }
    
      </style>
    <div class="container">

        <!-- <div style="height: 5px; width: 100%; background-color: black; margin-bottom: 5px; margin-top: 5px;"></div> -->
        <div class="left-side">
          
          <form class="button_group" style="
                  display: grid; grid-template-columns: repeat(3, 0fr); gap: 10px;
              ">
              <input class= "checkbox_options" type="checkbox" id="OCR_checkbox">  
              <label for="OCR">OCR:</label>
              <div>
                <textarea type="text" id="OCR" placeholder="Enter OCR text:" maxlength="200" oninput="updateCharCount()"></textarea>
                <div class="char-counter" id="charCounter">0/200</div>
              </div>
              <input class= "checkbox_options" type="checkbox" id="ASR_checkbox">  
              <label for="ASR">ASR:</label>
              <div>
                <textarea type="text" id="ASR" placeholder="Enter ASR text:" maxlength="200" oninput="updateCharCountASR()"></textarea>
                <div class="char-counter" id="charCounterASR">0/200</div>  
              </div>
              <input class= "checkbox_options" type="checkbox" id="clip">
              <label for="clip" class="Cliplabel">clip</label>     
              <textarea type="text" id="text_query" placeholder="Clip search:"></textarea>
            </form>
            <form class="clip_btn" style="
            display: grid; grid-template-columns: repeat(2, 0fr); gap: 10px;
            ">
              <input class= "checkbox_options" type="checkbox" id="OD">
              <label for="OD" class="Odlabel">OD</label>        
              <input class= "checkbox_options" type="checkbox" id="Place">
              <label for="Place" class="Placelabel">Place</label>
          </form>      
            <div class="search">
              <input id="place_query" type="text" placeholder="Place query">
              <div class="search-result">
                <ul class="place-list">
                </ul>
              </div>
            </div>

            <div class="searchod">
              <input id="od_query" type="text" placeholder="OD query">
              <div class="search-result-od">
                <ul class="od-list">
                </ul>
              </div>
            </div>
            
    
          <button class="custom-btn btn-13" onclick="search();">Search</button>
          <label id="delayedLabel" class="hidden-label">Please tick the options above</label>
        </div>

        <div>
          <div id="div_img">
            
          </div>
    
          <div style="height: 5px; width: 100%; background-color: black;"></div>
          <div id="div_page">
              
          </div>
          <div id="div_total_page">Total: 1200 page</div>
          <div style="margin-bottom: 50px;"></div>  
        </div>
        
        <div id="videoModal">
            <button id="closeBtn">&times;</button>
            <div id="wrapvideo">
              <label id="frame_id"></label>
              <video id="videoPlayer" controls>
            </div>
            </video>
        </div>
      </div>
    <script>
        var data = '{{ data|tojson }}';
        data = data.replace(/\s/g, '');
        data = data.replace(/\\/g, '/');
        data = JSON.parse(data);
        let btn_knn = document.getElementsByClassName("btn_knn");
        let btn_select = document.getElementsByClassName("btn_select");
        let hoverImg = document.getElementsByClassName("hoverImg");
        const checkbox = document.getElementById('Place');
        const checkboxOD = document.getElementById('OD');
        const checkboxOCR = document.getElementById('OCR_checkbox');
        const checkboxASR = document.getElementById('ASR_checkbox');
        const searchplace = document.querySelector('.search');
        const searchod = document.querySelector('.searchod');
        const placeList = document.querySelector('.place-list');
        const searchInput = document.getElementById('place_query');
        const ODList = document.querySelector('.od-list');
        const searchInputOD = document.getElementById('od_query');
        const checkboxClip = document.getElementById('clip');
        const ODlabel = document.querySelector('.Odlabel');
        const Placelabel = document.querySelector('.Placelabel');
        const videoFrame = document.getElementById('videoModal');
        const frameId = document.getElementById('frame_id');
        const delayedlabel = document.getElementById('delayedLabel');
        const OCRquery = document.getElementById('OCR');
        const ASRquery = document.getElementById('ASR');

        document.addEventListener('DOMContentLoaded', function() {
            var closeBtn = document.getElementById('closeBtn');
            var videoPlayer = document.getElementById('videoPlayer');

            closeBtn.addEventListener('click', function() {
                videoPlayer.pause();
                videoPlayer.currentTime = 0;
            });
        });
        
        ODlabel.style.display = checkboxOD.style.display = Placelabel.style.display = checkbox.style.display = 'none'
        
        document.getElementById('closeBtn').addEventListener('click', function() {
            document.getElementById('videoModal').style.display = 'none';
        });

        checkboxClip.addEventListener('change', () => {
          if (checkboxClip.checked) {
            showPlace();
            showOD();
          } else {
            hidePlace();
            hideOD();
          }
        })
        function hideOD() {
          checkboxOD.checked = false;
          ODlabel.style.display = 'none';
          checkboxOD.style.display = 'none';
          searchod.style.display = 'none';
        }
        function showOD() {
          checkboxOD.checked = false;
          checkboxOD.style.display = 'block'
          ODlabel.style.display = 'block';
        }
        function showPlace() {
          checkbox.checked = false;
          checkbox.style.display = 'block';
          Placelabel.style.display = 'block';
        }
        function hidePlace() {
          checkbox.checked = false;
          checkbox.style.display = 'none';
          Placelabel.style.display = 'none';
          searchplace.style.display = 'none';
        }

        
        checkboxOCR.addEventListener('change', () => {
          if (checkboxOCR.checked) {
            checkboxASR.checked = false;
            checkboxASR.disabled = true;
            checkboxClip.disabled = true;
            checkboxClip.checked = false;
            hideOD();
            hidePlace();
          } else {
            checkboxClip.disabled = false;
            checkboxASR.disabled = false;
          }
        });
        
        checkboxASR.addEventListener('change', () => {
          if (checkboxASR.checked) {
            checkboxOCR.checked = false;
            checkboxOCR.disabled = true;
            checkboxClip.disabled = true;
            checkboxClip.checked = false;
            hideOD();
            hidePlace();
          } else {
            checkboxOCR.disabled = false;
            checkboxClip.disabled = false;
          }
        });
        
        checkbox.addEventListener('change', () => {
          if (checkbox.checked) {
            searchplace.style.display = 'block';
            searchod.style.display = 'none';
            checkboxOD.checked = false;
          } else {
            searchplace.style.display = 'none';
          }
        });
        
        checkboxOD.addEventListener('change', () => {
          if (checkboxOD.checked) {
            searchod.style.display = 'block';
            searchplace.style.display = 'none';
            checkbox.checked = false;
          } else {
            searchod.style.display = 'none';
          }
        });
        
        searchInput.addEventListener('input', () => {
          searchPlace(removeToneMark(searchInput.value.toLowerCase()));
        });
        
        searchInputOD.addEventListener('input', () => {
          searchOD(removeToneMark(searchInputOD.value.toLowerCase()));
        });


        function updateCharCount() {
            const textarea = document.getElementById('OCR');
            const charCounter = document.getElementById('charCounter');
            charCounter.textContent = `${textarea.value.length}/200`;
        }

        
        function updateCharCountASR() {
            const textarea = document.getElementById('ASR');
            const charCounterASR = document.getElementById('charCounterASR');
            charCounterASR.textContent = `${textarea.value.length}/200`;
        }

        function add_paging(){
            var url = new URL(window.location.href);
            var cur_index = parseInt(url.searchParams.get("index"));
            var imgpath = url.searchParams.get("imgpath");
            // var labelpath = url.searchParams.get("labelpath");
            if (cur_index == 'undefined'){
                cur_index = 0;
            }
            var i = cur_index-4;
            if (i > 0){
                var iDiv = document.createElement('div');
                iDiv.className = 'page_num';
                iDiv.innerHTML = "...";
                document.getElementById("div_page").appendChild(iDiv);
            }
            for (i; ((i < data['num_page']) && (i < cur_index+4)); i++){
                if (i < 0){
                    i = 0;
                }
                var iDiv = document.createElement('div');
                iDiv.className = 'page_num';
                var iA = document.createElement('a');
                // iA.href = "?index="+i.toString()+"&imgpath="+imgpath+"&labelpath="+labelpath;
                iA.href = "?index="+i.toString()+"&imgpath="+imgpath;
                iA.innerHTML = i.toString();
                if (i == cur_index){
                    iA.style.color="green";
                }
                iDiv.appendChild(iA);
                document.getElementById("div_page").appendChild(iDiv);
            }
            if (i < data['num_page']){
                var iDiv = document.createElement('div');
                iDiv.className = 'page_num';
                iDiv.innerHTML = "...";
                document.getElementById("div_page").appendChild(iDiv);
            }
            document.getElementById("div_total_page").innerHTML = "Total: "+data['num_page'].toString()+" page";
        }
        
        function add_img(div_id_image){
            let div_img = document.getElementById("div_img");
            let pagefile_list = data['pagefile'];
            
            pagefile_list.forEach((item,index) => {
                // console.log('item: ' + JSON.stringify(item))
                $("#div_img").append(
                    `<div class= "container_img_btn">
                        <button class="btn_knn" onClick="go_img_search(${item.id})">IR</button>
                        <img class="hoverImg" onclick="show_video(${item.id}, '${item.imgpath}')" src="get_img?fpath=${item.imgpath}">
                    </div>`
                )
            });
        
        }
        
        function go_img_search(id){
            window.open("/imgsearch?imgid="+id);
        }

        function on_load(){
            var url = new URL(window.location.href);
            var imgpath = url.searchParams.get("imgpath");

            if("query" in data){
              document.getElementById("text_query").value = data["query"]
            }
            add_paging();
            add_img("div_img");
        }
        
        function saveFormState() {
            const formState = {
                text_query: document.getElementById('text_query').value,
                place_query: searchInput.value,
                checkboxClip: checkboxClip.checked,
                checkbox: checkbox.checked,
                checkboxOCR: checkboxOCR.checked,
                OCRquery: OCRquery.value,
                checkboxASR: checkboxASR.checked,
                ASRquery: ASRquery.value,
                searchInputOD: searchInputOD.value,
                checkboxOD: checkboxOD.checked,
            };
            localStorage.setItem('formState', JSON.stringify(formState));
        }

        function loadFormState() {
            const formState = JSON.parse(localStorage.getItem('formState'));
            if (formState) {
                document.getElementById('text_query').value = formState.text_query;
                checkboxOCR.checked = formState.checkboxOCR;
                OCRquery.value = formState.OCRquery;
                checkboxASR.checked = formState.checkboxASR;
                ASRquery.value = formState.ASRquery;
                checkboxClip.checked = formState.checkboxClip;
                if (checkboxClip.checked) {
                  showOD();
                  showPlace();
                }
                checkbox.checked = formState.checkbox;
                if (checkbox.checked) {
                  searchplace.style.display = 'block';
                }
                searchInput.value = formState.place_query;
                checkboxOD.checked = formState.checkboxOD;
                if (checkboxOD.checked) {
                  searchod.style.display = 'block';
                }
                searchInputOD.value = formState.searchInputOD;
            }
        }

        window.addEventListener('load', loadFormState);

        function show_video(id, path){
            videoFrame.style.display ="flex";
            videourl = `/static/video/scene_${id}.mp4`;
            videoPlayer.innerHTML = `<source src="${videourl}" type="video/mp4">`;
            videoPlayer.load()
            frameId.innerHTML = path;
        }

        function search(){
          if (checkboxClip.checked) {
            text_query = document.getElementById('text_query').value;
            if (checkbox.checked) {
              place_query = searchInput.value;
              saveFormState();
              window.location.href = "/textsearch?textquery="+text_query;
              window.location.href = "/placesearch?placequery="+place_query;
            } else {
              saveFormState();
              window.location.href = "/textsearch?textquery="+text_query;
            }
          } else {
            delayedlabel.style.display = 'block';
            setTimeout(function() {
              delayedlabel.style.display = 'none';
            }, 3000); 
          }
        }


        function searchPlace(a) {
          
          placeList.innerHTML = ``;
          places = ['airfie', 'airplane_cab', 'airport_termin', 'alco', 'all', 'amphitheat', 'amusement_arca', 'amusement_pa', 'apartment_building/outdo', 'aquari', 'aqueduc', 'arcad', 'arc', 'archaelogical_excavatio', 'archiv', 'arena/hocke', 'arena/performanc', 'arena/rode', 'army_bas', 'art_galler', 'art_schoo', 'art_studi', 'artists_lof', 'assembly_lin', 'athletic_field/outdoo', 'atrium/publi', 'atti', 'auditoriu', 'auto_factor', 'auto_showroo', 'badland', 'bakery/sho', 'balcony/exterio', 'balcony/interio', 'ball_pi', 'ballroo', 'bamboo_fores', 'bank_vaul', 'banquet_hal', 'ba', 'bar', 'barndoo', 'baseball_fiel', 'basemen', 'basketball_court/indoo', 'bathroo', 'bazaar/indoo', 'bazaar/outdoo', 'beac', 'beach_hous', 'beauty_salo', 'bedchambe', 'bedroo', 'beer_garde', 'beer_hal', 'bert', 'biology_laborator', 'boardwal', 'boat_dec', 'boathous', 'bookstor', 'booth/indoo', 'botanical_garde', 'bow_window/indoo', 'bowling_alle', 'boxing_rin', 'bridg', 'building_facad', 'bullrin', 'burial_chambe', 'bus_interio', 'bus_station/indoo', 'butchers_sho', 'butt', 'cabin/outdoo', 'cafeteri', 'campsit', 'campu', 'canal/natura', 'canal/urba', 'candy_stor', 'canyo', 'car_interio', 'carrouse', 'castl', 'catacom', 'cemeter', 'chale', 'chemistry_la', 'childs_roo', 'church/indoo', 'church/outdoo', 'classroo', 'clean_roo', 'clif', 'close', 'clothing_stor', 'coas', 'cockpi', 'coffee_sho', 'computer_room', 'conference_center', 'conference_room', 'construction_site', 'corn_field', 'corral', 'corridor', 'cottage', 'courthouse', 'courtyard', 'creek', 'crevasse', 'crosswalk', 'dam', 'delicatessen', 'department_store', 'desert/sand', 'desert/vegetation', 'desert_road', 'diner/outdoor', 'dining_hall', 'dining_room', 'discotheque', 'doorway/outdoor', 'dorm_room', 'downtown', 'dressing_room', 'driveway', 'drugstore', 'elevator/door', 'elevator_lobby', 'elevator_shaft', 'embassy', 'engine_room', 'entrance_hall', 'escalator/indoor', 'excavation', 'fabric_store', 'farm', 'fastfood_restaurant', 'field/cultivated', 'field/wild', 'field_road', 'fire_escape', 'fire_station', 'fishpond', 'flea_market/indoor', 'florist_shop/indoor', 'food_court', 'football_field', 'forest/broadleaf', 'forest_path', 'forest_road', 'formal_garden', 'fountain', 'galley', 'garage/indoor', 'garage/outdoor', 'gas_station', 'gazebo/exterior', 'general_store/indoor', 'general_store/outdoor', 'gift_shop', 'glacier', 'golf_course', 'greenhouse/indoor', 'greenhouse/outdoor', 'grotto', 'gymnasium/indoor', 'hangar/indoor', 'hangar/outdoor', 'harbor', 'hardware_store', 'hayfield', 'heliport', 'highway', 'home_office', 'home_theater', 'hospital', 'hospital_room', 'hot_spring', 'hotel/outdoor', 'hotel_room', 'house', 'hunting_lodge/outdoor', 'ice_cream_parlor', 'ice_floe', 'ice_shelf', 'ice_skating_rink/indoor', 'ice_skating_rink/outdoor', 'iceberg', 'igloo', 'industrial_area', 'inn/outdoor', 'islet', 'jacuzzi/indoor', 'jail_cell', 'japanese_garden', 'jewelry_shop', 'junkyard', 'kasbah', 'kennel/outdoor', 'kindergarden_classroom', 'kitchen', 'lagoon', 'lake/natural', 'landfill', 'landing_deck', 'laundromat', 'lawn', 'lecture_room', 'legislative_chamber', 'library/indoor', 'library/outdoor', 'lighthouse', 'living_room', 'loading_dock', 'lobby', 'lock_chamber', 'locker_room', 'mansion', 'manufactured_home', 'market/indoor', 'market/outdoor', 'marsh', 'martial_arts_gym', 'mausoleum', 'medina', 'mezzanine', 'moat/water', 'mosque/outdoor', 'motel', 'mountain', 'mountain_path', 'mountain_snowy', 'movie_theater/indoor', 'museum/indoor', 'museum/outdoor', 'music_studio', 'natural_history_museum', 'nursery', 'nursing_home', 'oast_house', 'ocean', 'office', 'office_building', 'office_cubicles', 'oilrig', 'operating_room', 'orchard', 'orchestra_pit', 'pagoda', 'palace', 'pantry', 'park', 'parking_garage/indoor', 'parking_garage/outdoor', 'parking_lot', 'pasture', 'patio', 'pavilion', 'pet_shop', 'pharmacy', 'phone_booth', 'physics_laboratory', 'picnic_area', 'pier', 'pizzeria', 'playground', 'playroom', 'plaza', 'pond', 'porch', 'promenade', 'pub/indoor', 'racecourse', 'raceway', 'raft', 'railroad_track', 'rainforest', 'reception', 'recreation_room', 'repair_shop', 'residential_neighborhood', 'restaurant', 'restaurant_kitchen', 'restaurant_patio', 'rice_paddy', 'river', 'rock_arch', 'roof_garden', 'rope_bridge', 'ruin', 'runway', 'sandbox', 'sauna', 'schoolhouse', 'science_museum', 'server_room', 'shed', 'shoe_shop', 'shopfront', 'shopping_mall/indoor', 'shower', 'ski_resort', 'ski_slope', 'sky', 'skyscraper', 'slum', 'snowfield', 'soccer_field', 'stable', 'stadium/baseball', 'stadium/football', 'stadium/soccer', 'stage/indoor', 'stage/outdoor', 'staircase', 'storage_room', 'street', 'subway_station/platform', 'supermarket', 'sushi_bar', 'swamp', 'swimming_hole', 'swimming_pool/indoor', 'swimming_pool/outdoor', 'synagogue/outdoor', 'television_room', 'television_studio', 'temple/asia', 'throne_room', 'ticket_booth', 'topiary_garden', 'tower', 'toyshop', 'train_interior', 'train_station/platform', 'tree_farm', 'tree_house', 'trench', 'tundra', 'underwater/ocean_deep', 'utility_room', 'valley', 'vegetable_garden', 'veterinarians_office', 'viaduct', 'village', 'vineyard', 'volcano', 'volleyball_court/outdoor', 'waiting_room', 'water_park', 'water_tower', 'waterfall', 'watering_hole', 'wave', 'wet_bar', 'wheat_field', 'wind_farm', 'windmill', 'yard', 'youth_hostel', 'zen_garden']
          for (place of places) {
              if (removeToneMark(place).includes(a)) {
                  item = document.createElement("li");
                  item.classList.add('placeItem');
                  item.innerHTML =  `
                  <button class="placeItem" onclick="searchInput.value = '${place}'; this.blur();">
                  ${place}
                  `;
                  placeList.appendChild(item);
              }
          }
        }

        function searchOD(a) {
          
          ODList.innerHTML = ``;
          ods = ['__background__', 'person', 'bicycle', 'car', 'motorcycle', 'airplane', 'bus', 'train', 'truck', 'boat', 'traffic light', 'fire hydrant', 'stop sign', 'parking meter', 'bench', 'bird', 'cat', 'dog', 'horse', 'sheep', 'cow', 'elephant', 'bear', 'zebra', 'giraffe', 'backpack', 'umbrella', 'handbag', 'tie', 'suitcase', 'frisbee', 'skis', 'snowboard', 'sports ball', 'kite', 'baseball bat', 'baseball glove', 'skateboard', 'surfboard', 'tennis racket', 'bottle', 'wine glass', 'cup', 'fork', 'knife', 'spoon', 'bowl', 'banana', 'apple', 'sandwich', 'orange', 'broccoli', 'carrot', 'hot dog', 'pizza', 'donut', 'cake', 'chair', 'couch', 'potted plant', 'bed', 'dining table', 'toilet', 'tv', 'laptop', 'mouse', 'remote', 'keyboard', 'cell phone', 'microwave', 'oven', 'toaster', 'sink', 'refrigerator', 'book', 'clock', 'vase', 'scissors', 'teddy bear', 'hair drier', 'toothbrush']
          for (od of ods) {
              if (removeToneMark(od).includes(a)) {
                  item = document.createElement("li");
                  item.classList.add('odItem');
                  item.innerHTML = `
                  <button class="odItem" onclick="searchInputOD.value = '${od}'; this.blur();">
                  ${od}
                  `;
                  ODList.appendChild(item);
              }
          }
        }

        function removeToneMark(str) {
            // remove accents
            var from = "àáãảạăằắẳẵặâầấẩẫậèéẻẽẹêềếểễệđùúủũụưừứửữựòóỏõọôồốổỗộơờớởỡợìíỉĩịäëïîöüûñçýỳỹỵỷ",
                to   = "aaaaaaaaaaaaaaaaaeeeeeeeeeeeduuuuuuuuuuuoooooooooooooooooiiiiiaeiiouuncyyyyy";
            for (var i=0, l=from.length ; i < l ; i++) {
              str = str.replace(RegExp(from[i], "gi"), to[i]);
            }

            str = str.toLowerCase().trim()

            return str;
        }

        
    </script>
</body>
</html> 
